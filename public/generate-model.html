<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generate Bee 3D Model</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    #container {
      width: 100%;
      height: 400px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #45a049;
    }
    h1 {
      color: #333;
    }
    p {
      margin-bottom: 20px;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <h1>Bee 3D Model Generator</h1>
  <p>This page generates a simple 3D bee model for use in the BeeCoin app. Click the button below to download the model.</p>
  
  <div id="container"></div>
  
  <button id="download">Download Bee Model</button>
  
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';
    import { GLTFExporter } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/exporters/GLTFExporter.js';
    
    // Setup scene
    const container = document.getElementById('container');
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xf0f0f0);
    
    const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.z = 5;
    
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);
    
    // Add controls
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    
    // Add lights
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
    directionalLight.position.set(1, 1, 1);
    scene.add(directionalLight);
    
    // Create a simple bee-like shape
    function createBee() {
      const group = new THREE.Group();
      
      // Body (ellipsoid)
      const bodyGeometry = new THREE.SphereGeometry(1, 32, 16);
      bodyGeometry.scale(1, 0.7, 1.5);
      const bodyMaterial = new THREE.MeshStandardMaterial({ 
        color: 0xFFD700, // Gold color for the body
        roughness: 0.5,
        metalness: 0.2
      });
      const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
      group.add(body);
      
      // Stripes
      const stripeGeometry = new THREE.CylinderGeometry(1.01, 1.01, 0.2, 32);
      const stripeMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x000000, // Black stripes
        roughness: 0.5,
        metalness: 0.1
      });
      
      // Add three stripes
      for (let i = -0.6; i <= 0.6; i += 0.6) {
        const stripe = new THREE.Mesh(stripeGeometry, stripeMaterial);
        stripe.position.z = i;
        stripe.rotation.x = Math.PI / 2;
        group.add(stripe);
      }
      
      // Wings
      const wingGeometry = new THREE.CircleGeometry(0.8, 32, 0, Math.PI);
      const wingMaterial = new THREE.MeshStandardMaterial({ 
        color: 0xFFFFFF, 
        transparent: true,
        opacity: 0.5,
        side: THREE.DoubleSide,
        roughness: 0.3,
        metalness: 0.2
      });
      
      // Left wing
      const leftWing = new THREE.Mesh(wingGeometry, wingMaterial);
      leftWing.position.set(-0.7, 0.5, 0);
      leftWing.rotation.z = -Math.PI / 4;
      leftWing.rotation.y = Math.PI / 4;
      group.add(leftWing);
      
      // Right wing
      const rightWing = new THREE.Mesh(wingGeometry, wingMaterial);
      rightWing.position.set(0.7, 0.5, 0);
      rightWing.rotation.z = Math.PI / 4;
      rightWing.rotation.y = -Math.PI / 4;
      group.add(rightWing);
      
      // Eyes
      const eyeGeometry = new THREE.SphereGeometry(0.15, 16, 16);
      const eyeMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x000000, 
        roughness: 0.1,
        metalness: 0.1
      });
      
      // Left eye
      const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
      leftEye.position.set(-0.3, 0.3, 1.2);
      group.add(leftEye);
      
      // Right eye
      const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
      rightEye.position.set(0.3, 0.3, 1.2);
      group.add(rightEye);
      
      // Stinger
      const stingerGeometry = new THREE.ConeGeometry(0.1, 0.5, 16);
      const stingerMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x000000, 
        roughness: 0.5,
        metalness: 0.2
      });
      const stinger = new THREE.Mesh(stingerGeometry, stingerMaterial);
      stinger.position.set(0, 0, -1.7);
      stinger.rotation.x = Math.PI;
      group.add(stinger);
      
      // Antennae
      const antennaGeometry = new THREE.CylinderGeometry(0.03, 0.03, 0.5, 8);
      const antennaMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x000000, 
        roughness: 0.5,
        metalness: 0.2
      });
      
      // Left antenna
      const leftAntenna = new THREE.Mesh(antennaGeometry, antennaMaterial);
      leftAntenna.position.set(-0.2, 0.6, 1.3);
      leftAntenna.rotation.x = -Math.PI / 4;
      leftAntenna.rotation.z = -Math.PI / 8;
      group.add(leftAntenna);
      
      // Right antenna
      const rightAntenna = new THREE.Mesh(antennaGeometry, antennaMaterial);
      rightAntenna.position.set(0.2, 0.6, 1.3);
      rightAntenna.rotation.x = -Math.PI / 4;
      rightAntenna.rotation.z = Math.PI / 8;
      group.add(rightAntenna);
      
      // Add small spheres at the end of antennae
      const antennaTipGeometry = new THREE.SphereGeometry(0.06, 8, 8);
      
      // Left antenna tip
      const leftAntennaTip = new THREE.Mesh(antennaTipGeometry, antennaMaterial);
      leftAntennaTip.position.set(-0.3, 0.8, 1.5);
      group.add(leftAntennaTip);
      
      // Right antenna tip
      const rightAntennaTip = new THREE.Mesh(antennaTipGeometry, antennaMaterial);
      rightAntennaTip.position.set(0.3, 0.8, 1.5);
      group.add(rightAntennaTip);
      
      return group;
    }
    
    // Create and add the bee to the scene
    const bee = createBee();
    scene.add(bee);
    
    // Animation loop
    function animate() {
      requestAnimationFrame(animate);
      
      // Rotate the bee slowly
      bee.rotation.y += 0.005;
      
      controls.update();
      renderer.render(scene, camera);
    }
    
    animate();
    
    // Handle window resize
    window.addEventListener('resize', () => {
      camera.aspect = container.clientWidth / container.clientHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(container.clientWidth, container.clientHeight);
    });
    
    // Download functionality
    document.getElementById('download').addEventListener('click', () => {
      const exporter = new GLTFExporter();
      
      exporter.parse(
        scene,
        (gltf) => {
          const blob = new Blob([gltf], { type: 'application/octet-stream' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = 'bee.glb';
          link.click();
        },
        (error) => {
          console.error('An error happened during export:', error);
        },
        { binary: true } // Export as binary GLB
      );
    });
  </script>
</body>
</html>